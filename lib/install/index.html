<!DOCTYPE html>
<html>
    <head>
        <title>ioBlog 安装器</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="/style.css">
    </head>
    <body onhashchange="page.change();">
        <!-- 按钮容器 -->
        <h1 style="text-align: center;" id="_hello">Hello!</h1>
        <div class="float">
            <div>
                <svg fill="currentColor" id="_stop" style="display: none;" viewBox="0 0 16 16" onclick="audio.pause();">
                    <path d="M3.5 5A1.5 1.5 0 0 1 5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5zM5 4.5a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 .5-.5V5a.5.5 0 0 0-.5-.5H5z"/>
                </svg>
                <svg fill="currentColor" id="_play" style="display: none;" viewBox="0 0 16 16" onclick="audio.play()">
                    <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                </svg>
                <audio autoplay loop preload="auto" id="_audio">
                    <!-- <source src="/bgm.ogg" type="audio/ogg"> -->
                    <source src="/bgm.mp3" type="audio/mpeg">
                    <svg fill="currentColor" id="_unsupport" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>
                    </svg>
                </audio>
            </div>
        </div>
        <!-- 欢迎页 -->
        <div id="page_hello" class="page">
            <div class="center">
                <h1>欢迎使用ioBlog!</h1>
                <p>安装向导将带领你1分钟完成安装。</p>
                <p>待出现[完成]标志，再次启动ioBlog即可</p>
                <button onclick="document.location.href='#/license';" >
                <svg fill="currentColor" class="default" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
                </svg>
                出发
            </button>
            </div>
            
        </div>
        <!-- 条例 -->
        <div id="page_license" class="page basic">
            <h1>请阅读并同意这些协议</h1>
            <div id="license_page">
                <p>感谢您使用ioBlog!我们很希望体现自由软件的特点，因此我们选择了Mit License</p>
                <p>介绍、文档可以在<a href="http://blog.imzlh.top/doc/">DOC站</a>找到，在此简单自述：</p>
                <ol>
                    <li>纯PHP编写，完全可定制、修改模型，且代码简单，完全开源(没有任何代码加密)。</li>
                    <li>快、低CPU占用是我们的特点，常驻内存、动态响应、灵活处理使得我们更快更强</li>
                    <li>我们有出色的性能体验，ioHTTP已经逐渐成熟，已经支持了大部分HTTP功能。</li>
                    <li>重制版增加了插件、基于事件驱动的event框架、后台(本质还是插件)，并进行了重写，保证了框架的简洁易用</li>
                </ol>
                <p>不过几点提醒还是要说的</p>
                <ul>
                    <li>不允许将本产品销售(不包括插件)</li>
                    <li>zlh允许用户在 MIT 协议许可的范围内使用, 拷贝, 修改和分发此程序</li>
                    <li>我们欢迎用户<a href=" //github.com/imzlh/ioBlog">加入我们</a>，贡献你的代码</li>
                    <li>还是不懂？看看ioBlog文章:<a href="http://blog.imzlh.top/doc/">GITHUB</a>里查看</li>
                </ul>
                <p>感谢大家！</p>
            </div>
            <button class="btn" onclick="document.location.hash = '#/configure';">知晓，下一步！</button>
        </div>
        <!-- 配置 -->
        <div id="page_configure" class="page basic">
            <h2>快速设置</h2>
            <h3><x> # </x>全局设置</h3>
            <p>博客标题<input id="name" value="ioBlog" type="text"></p>
            <p>博客描述<input id="desc" value="Hello world!" type="text"></p>
            <p>文章路径<input id="param" value="/Y/m/d" type="text"></p>
            <p>Y:年,m:月,d:日(更多用法参考PHP date()函数用法)，用于让文章拥有不变的路径</p>
            <p>文章路径就是生成URL的格式，请使用PHP DATE格式，字母请加<code>\</code>转义</p>
            <p>博客域名<input id="url" value="ioblog.top" type="text"></p>
            <p>请仔细填写博客页面，否则管理员面板和部分插件在不正确的域名下将响应<code>403</code></p>
            <p>文章扩展名<input id="ext" value="html" type="text" onchange="document.getElementById('.__show_ext').innerHTML = this.value;"></p>
            <p>文件扩展名就是为了让URL好看而在URL后加的后缀，根据填写你的访问则将是<code>/post/0.<span id="__show_ext">html</code></p>
            <p>预览长度 <input type="number" max="150" min="1" id="view" value="60"></p>

            <h3><x> # </x>服务设置</h3>
            HTTP端口 <input type="number" max="65535" min="1" id="port" value="80">
            <p> 
                <svg fill="currentColor" viewBox="0 0 16 16" style="color: red;height:1em;">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M11.354 4.646a.5.5 0 0 0-.708 0l-6 6a.5.5 0 0 0 .708.708l6-6a.5.5 0 0 0 0-.708z"/>
                </svg>
                警告：若使用1024以下的端口请确保使用ROOT账户启动！
            </p>
            <p>服务线程 <input type="number" min="1" max="16" id="max" value="4"></p>
            <p>服务进程 <input type="number" min="1" max="8" id="task" value="8"></p>
            <p>注意！服务进程数、线程数不是越大越好，过多会大量占用系统资源导致宕机！但也不是越小越好，若此并发数会大大减小！</p>
            <p>最大单进程并发 <input type="number" min="1" max="8" id="counts" value="8"></p>
            <p>最大单个进程(在多进程模式中则是最大单线程)并发，这在CC中可能有用，但是有些系统可能会重传导致无效</p>
            <p>提示：默认监听0.0.0.0(IPV4全部)，可以在源码中修改。</p>

            <button onclick="send();">完成！提交至ioBlog后台</button>

            <h3><x>更多?</x></h3>
            <p>插件包源 <input type="text" id="source" value="http://imzlh.top:88/ioPkg"></p>
            <button onclick="location.href='#/ssl';">设置SSL(https)</button>
            <p>由于技术问题，请在面板配置插件:(</p>
        </div>
        <!-- SSL配置 -->
        <div class="page basic" id="page_ssl">
            <!-- CER上传 -->
            <button id="_config_cer" onclick="document.getElementById('cer').click()">
                <input style="display: none;" type="file" id="cer" onchange="ssl_file+=1;document.getElementById('#cer_msg').innerHTML = '完毕';">
                <label for="cer" id="cer_msg">上传证书</span>
            </button>
            <!-- KEY上传 -->
            <button class="btn" id="_config_key" onclick="document.getElementById('key').click()">
                <input style="display: none;" type="file" id="key" onchange="ssl_file+=1;document.getElementById('#key_msg').innerHTML = '完毕';">
                <label for="key" id="key_msg">上传私匙</span>
            </button>
            <button class="btn" onclick="upload.run();">开始上传</button>
            <button class="btn" onclick="location.href = '#/configure';">返回</button>
        </div>  
        <!-- 提示窗格 -->
        <div id="_msg" class="msg" style="display: none;"></div>
        <!-- 两个状态提示 -->
        <div id="page_success" class="page basic center">
            <svg fill="currentColor" viewBox="0 0 16 16" style="width:200px;color:green;">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </svg>
            <h1>成功！enjoy!</h1>
        </div>
        <div id="page_error" class="page basic center">
            <svg fill="currentColor" class="bi bi-dash-circle-fill" viewBox="0 0 16 16" style="width:200px;color:red;">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"/>
            </svg>
            <h2 style="color:red;">当提交时出现问题，请查看ioBlog运行状态，并尝试根据提示解决！</h2>
        </div>
        <script src="/script.js"></script>
    </body>
</html>